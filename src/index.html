<!DOCTYPE html>
<html>
<head>
    <title>Quotes API - Swagger UI</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.14.0/swagger-ui.min.css" />
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            margin:0;
            background: #fafafa;
        }
        #error-message {
            display: none;
            padding: 20px;
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ef5350;
            border-radius: 4px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div id="error-message">
        <h3>Error loading Swagger UI</h3>
        <p>There was an issue loading the Swagger interface. Please try refreshing the page.</p>
    </div>
    <div id="swagger-ui"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.14.0/swagger-ui-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.14.0/swagger-ui-standalone-preset.min.js"></script>
    <script>
        try {
            window.onload = function() {
                const spec = {
                    "openapi": "3.0.0",
                    "info": {
                        "title": "RUSTful API",
                        "description": "An API for storing and retrieving quotes, create shortened URLs and storing all the texy you want!",
                        "version": "1.0.0"
                    },
                    "servers": [
                        {
                            "url": "https://rustful.baileygamesand.codes",
                            "description": "Production"
                        },
                        {
                            "url": "http://localhost:840",
                            "description": "Test server"
                        }
                    ],
                    "paths": {
                        "/quotes": {
                            "post": {
                                "summary": "Create a new quote",
                                "description": "Add a new quote with text and speaker information",
                                "requestBody": {
                                    "required": true,
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "required": ["text", "speaker"],
                                                "properties": {
                                                    "text": {
                                                        "type": "string",
                                                        "description": "The quote text",
                                                        "example": "test"
                                                    },
                                                    "speaker": {
                                                        "type": "string",
                                                        "description": "The person who said the quote",
                                                        "example": "me"
                                                    }
                                                }
                                            },
                                            "examples": {
                                                "example1": {
                                                    "summary": "Basic quote example",
                                                    "value": {
                                                        "text": "test",
                                                        "speaker": "me"
                                                    }
                                                },
                                                "example2": {
                                                    "summary": "Inspirational quote",
                                                    "value": {
                                                        "text": "The only way to do great work is to love what you do",
                                                        "speaker": "Steve Jobs"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "responses": {
                                    "200": {
                                        "description": "Quote created successfully",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "description": "Unique identifier for the quote"
                                                        },
                                                        "text": {
                                                            "type": "string",
                                                            "description": "The quote text"
                                                        },
                                                        "speaker": {
                                                            "type": "string",
                                                            "description": "The person who said the quote"
                                                        },
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "400": {
                                        "description": "Bad request - invalid input",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "error": {
                                                            "type": "string",
                                                            "example": "Invalid input: text and speaker are required"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "500": {
                                        "description": "Internal server error",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "error": {
                                                            "type": "string",
                                                            "example": "Internal server error"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "get": {
                                "summary": "Get all quotes",
                                "description": "Retrieve a list of all quotes",
                                "responses": {
                                    "200": {
                                        "description": "List of quotes retrieved successfully",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "description": "Unique identifier for the quote"
                                                            },
                                                            "text": {
                                                                "type": "string",
                                                                "description": "The quote text"
                                                            },
                                                            "speaker": {
                                                                "type": "string",
                                                                "description": "The person who said the quote"
                                                            },
                                                            "created_at": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "description": "When the quote was created"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "/quote": {
                            "get": {
                                "summary": "Get a random quote",
                                "description": "Retrieve a single random quote from the collection",
                                "responses": {
                                    "200": {
                                        "description": "Random quote retrieved successfully",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "description": "Unique identifier for the quote"
                                                        },
                                                        "text": {
                                                            "type": "string",
                                                            "description": "The quote text"
                                                        },
                                                        "speaker": {
                                                            "type": "string",
                                                            "description": "The person who said the quote"
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "description": "When the quote was created"
                                                        }
                                                    }
                                                },
                                                "example": {
                                                    "id": 42,
                                                    "text": "The only way to do great work is to love what you do",
                                                    "speaker": "Steve Jobs",
                                                    "created_at": "2024-01-15T10:30:00Z"
                                                }
                                            }
                                        }
                                    },
                                    "404": {
                                        "description": "No quotes found",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "error": {
                                                            "type": "string",
                                                            "example": "No quotes available"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "/quotes/{id}": {
                            "get": {
                                "summary": "Get a specific quote",
                                "description": "Retrieve a quote by its ID",
                                "parameters": [
                                    {
                                        "name": "id",
                                        "in": "path",
                                        "required": true,
                                        "schema": {
                                            "type": "string"
                                        },
                                        "description": "The quote ID"
                                    }
                                ],
                                "responses": {
                                    "200": {
                                        "description": "Quote retrieved successfully",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "description": "Unique identifier for the quote"
                                                        },
                                                        "text": {
                                                            "type": "string",
                                                            "description": "The quote text"
                                                        },
                                                        "speaker": {
                                                            "type": "string",
                                                            "description": "The person who said the quote"
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "description": "When the quote was created"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "404": {
                                        "description": "Quote not found",
                                        "content": {
                                            "application/json": {
                                                "schema": {
                                                    "type": "object",
                                                    "properties": {
                                                        "error": {
                                                            "type": "string",
                                                            "example": "Quote not found"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                };

                const ui = SwaggerUIBundle({
                    spec: spec,
                    dom_id: '#swagger-ui',
                    deepLinking: true,
                    presets: [
                        SwaggerUIBundle.presets.apis,
                        SwaggerUIStandalonePreset
                    ],
                    plugins: [
                        SwaggerUIBundle.plugins.DownloadUrl
                    ],
                    layout: "StandaloneLayout",
                    tryItOutEnabled: true
                });
            };
        } catch (error) {
            console.error('Error initializing Swagger UI:', error);
            document.getElementById('error-message').style.display = 'block';
            document.getElementById('swagger-ui').style.display = 'none';
        }
    </script>
</body>
</html>